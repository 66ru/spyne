

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Rpclib FAQ &mdash; rpclib 2.5.1-beta documentation</title>
    
    <link rel="stylesheet" href="static/default.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.5.1-beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="rpclib 2.5.1-beta documentation" href="index.html" />
    <link rel="next" title="History and Future" href="h_and_f.html" />
    <link rel="prev" title="Running Tests" href="tests.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="h_and_f.html" title="History and Future"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="tests.html" title="Running Tests"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">rpclib 2.5.1-beta documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="rpclib-faq">
<h1>Rpclib FAQ<a class="headerlink" href="#rpclib-faq" title="Permalink to this headline">¶</a></h1>
<p>Frequently asked questions about rpclib and related libraries.</p>
<div class="section" id="does-rpclib-support-the-soap-1-2-standard">
<h2>Does rpclib support the SOAP 1.2 standard?<a class="headerlink" href="#does-rpclib-support-the-soap-1-2-standard" title="Permalink to this headline">¶</a></h2>
<p><strong>Short answer:</strong> No.</p>
<p><strong>Long answer:</strong> Nope.</p>
<p>Patches are welcome.</p>
</div>
<div class="section" id="how-do-i-implement-a-predefined-wsdl">
<h2>How do I implement a predefined WSDL?<a class="headerlink" href="#how-do-i-implement-a-predefined-wsdl" title="Permalink to this headline">¶</a></h2>
<p><strong>Short answer:</strong> By hand.</p>
<p><strong>Long answer:</strong> This is not a strength of rpclib, which is more oriented toward
implementing services from scratch. It does not have any functionality to parse
an existing WSDL document to produce the necessary Python classes and method
stubs.</p>
<p>Patches are welcome. You can start by adapting the WSDL parser from
<a class="reference external" href="http://rsl.sf.net">RSL</a>.</p>
</div>
<div class="section" id="is-it-possible-to-use-other-decorators-with-rpc-srpc">
<h2>Is it possible to use other decorators with &#64;rpc/&#64;srpc?<a class="headerlink" href="#is-it-possible-to-use-other-decorators-with-rpc-srpc" title="Permalink to this headline">¶</a></h2>
<p><strong>Short answer:</strong> Yes, but just use events. See the <a class="reference internal" href="manual/usermanager.html#manual-user-manager"><em>User Manager</em></a>
tutorial and the <a class="reference external" href="http://github.com/arskom/rpclib/blob/master/examples/user_manager/server_basic.py">events example</a>
to learn how to do so. They work almost the same, except for the syntax.</p>
<p><strong>Long Answer:</strong> Here&#8217;s the magic from the <a class="reference internal" href="reference/decorator.html#module-rpclib.decorator" title="rpclib.decorator"><tt class="xref py py-mod docutils literal"><span class="pre">rpclib.decorator</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">argcount</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">func_code</span><span class="o">.</span><span class="n">co_argcount</span>
<span class="n">param_names</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">func_code</span><span class="o">.</span><span class="n">co_varnames</span><span class="p">[</span><span class="n">arg_start</span><span class="p">:</span><span class="n">argcount</span><span class="p">]</span>
</pre></div>
</div>
<p>So if <tt class="docutils literal"><span class="pre">f</span></tt> is your decorator, its signature should be the same as the user method,
otherwise the parameter names and numbers in the interface are going to be wrong,
which will cause weird errors.</p>
<p>Please note that if you just intend to have a convenient way to set additional
method metadata, you can use the <tt class="docutils literal"><span class="pre">_udp</span></tt> argument to the <a class="reference internal" href="reference/decorator.html#rpclib.decorator.srpc" title="rpclib.decorator.srpc"><tt class="xref py py-func docutils literal"><span class="pre">rpclib.decorator.srpc()</span></tt></a>
to your liking.</p>
<p>So if you&#8217;re hell bent on using decorators, you should use the <a class="reference external" href="http://pypi.python.org/pypi/decorator/">decorator package</a>.
Here&#8217;s an example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">decorator</span> <span class="kn">import</span> <span class="n">decorator</span>

<span class="k">def</span> <span class="nf">_do_something</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&quot;before call&quot;</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
    <span class="k">print</span> <span class="s">&quot;after call&quot;</span>
    <span class="k">return</span> <span class="n">result</span>

<span class="k">def</span> <span class="nf">my_decor</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">decorator</span><span class="p">(</span><span class="n">_do_something</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">tests</span><span class="p">(</span><span class="n">ServiceBase</span><span class="p">):</span>
    <span class="nd">@my_decor</span>
    <span class="nd">@srpc</span><span class="p">(</span><span class="n">ComplexTypes</span><span class="o">.</span><span class="n">Integer</span><span class="p">,</span> <span class="n">_returns</span><span class="o">=</span><span class="n">ComplexTypes</span><span class="o">.</span><span class="n">Integer</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">testf</span><span class="p">(</span><span class="n">first</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">first</span>
</pre></div>
</div>
<p>Note that the place of the decorator matters. Putting it before <tt class="docutils literal"><span class="pre">&#64;srpc</span></tt> will
make it run once, on service initialization. Putting it after will make it run
every time the method is called, but not on initialization.</p>
<p>Original thread: <a class="reference external" href="http://mail.python.org/pipermail/soap/2011-September/000565.html">http://mail.python.org/pipermail/soap/2011-September/000565.html</a></p>
<p>PS: The next faq entry is also probably relevant to you.</p>
</div>
<div class="section" id="how-do-i-alter-the-behaviour-of-a-user-method-without-using-decorators">
<h2>How do I alter the behaviour of a user method without using decorators?<a class="headerlink" href="#how-do-i-alter-the-behaviour-of-a-user-method-without-using-decorators" title="Permalink to this headline">¶</a></h2>
<p><tt class="docutils literal"><span class="pre">ctx.descriptor.function</span></tt> contains the handle to the original function. You
can set that attribute to arbitrary callables to prevent the original user
method from running.</p>
<p>Note that this property is initialized only when the process starts. So you
should call <tt class="xref py py-func docutils literal"><span class="pre">ctx.descriptor.reset_function()</span></tt> to restore it to its
original value</p>
</div>
<div class="section" id="how-do-i-use-variable-names-that-are-also-python-keywords">
<h2>How do I use variable names that are also python keywords?<a class="headerlink" href="#how-do-i-use-variable-names-that-are-also-python-keywords" title="Permalink to this headline">¶</a></h2>
<p>Due to restrictions of the python language, you can&#8217;t do this:</p>
<blockquote>
<div><dl class="docutils">
<dt>class SomeClass(ComplexModel):</dt>
<dd>and = String
or = Integer
import = Datetime</dd>
</dl>
</div></blockquote>
<p>The workaround is as follows:</p>
<blockquote>
<div><dl class="docutils">
<dt>class SomeClass(ComplexModel):</dt>
<dd><dl class="first docutils">
<dt>_type_info = {</dt>
<dd>&#8216;and&#8217;: String
&#8216;or&#8217;: Integer
&#8216;import&#8217;: Datetime</dd>
</dl>
<p class="last">}</p>
</dd>
</dl>
</div></blockquote>
<p>You also can&#8217;t do this:</p>
<blockquote>
<div><p>&#64;rpc(String, String, String, _returns=String)
def f(ctx, from, import):</p>
<blockquote>
<div>return &#8216;1234&#8217;</div></blockquote>
</div></blockquote>
<p>The workaround is as follows:</p>
<blockquote>
<div><dl class="docutils">
<dt>&#64;rpc(String, String, String, _returns=String,</dt>
<dd><dl class="first docutils">
<dt>_in_variable_names={&#8216;_from&#8217;: &#8216;from&#8217;,</dt>
<dd>&#8216;_import&#8217;: &#8216;import&#8217;},</dd>
</dl>
<p class="last">_out_variable_name=&#8221;return&#8221;</p>
</dd>
<dt>def f(ctx, _from, _import):</dt>
<dd>return &#8216;1234&#8217;</dd>
</dl>
</div></blockquote>
<p>See here: <a class="reference external" href="https://github.com/arskom/rpclib/blob/rpclib-2.5.0-beta/src/rpclib/test/test_service.py#L114">https://github.com/arskom/rpclib/blob/rpclib-2.5.0-beta/src/rpclib/test/test_service.py#L114</a></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Rpclib FAQ</a><ul>
<li><a class="reference internal" href="#does-rpclib-support-the-soap-1-2-standard">Does rpclib support the SOAP 1.2 standard?</a></li>
<li><a class="reference internal" href="#how-do-i-implement-a-predefined-wsdl">How do I implement a predefined WSDL?</a></li>
<li><a class="reference internal" href="#is-it-possible-to-use-other-decorators-with-rpc-srpc">Is it possible to use other decorators with &#64;rpc/&#64;srpc?</a></li>
<li><a class="reference internal" href="#how-do-i-alter-the-behaviour-of-a-user-method-without-using-decorators">How do I alter the behaviour of a user method without using decorators?</a></li>
<li><a class="reference internal" href="#how-do-i-use-variable-names-that-are-also-python-keywords">How do I use variable names that are also python keywords?</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="tests.html"
                        title="previous chapter">Running Tests</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="h_and_f.html"
                        title="next chapter">History and Future</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/faq.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="h_and_f.html" title="History and Future"
             >next</a> |</li>
        <li class="right" >
          <a href="tests.html" title="Running Tests"
             >previous</a> |</li>
        <li><a href="index.html">rpclib 2.5.1-beta documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Rpclib Contributors.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>