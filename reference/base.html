

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Fundamental Data Structures &mdash; rpclib 2.5.1-beta documentation</title>
    
    <link rel="stylesheet" href="../static/default.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.5.1-beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/underscore.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <link rel="top" title="rpclib 2.5.1-beta documentation" href="../index.html" />
    <link rel="up" title="Rpclib API Reference" href="index.html" />
    <link rel="next" title="Models" href="model.html" />
    <link rel="prev" title="Rpclib API Reference" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="model.html" title="Models"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Rpclib API Reference"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">rpclib 2.5.1-beta documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Rpclib API Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="fundamental-data-structures">
<span id="reference-base"></span><h1>Fundamental Data Structures<a class="headerlink" href="#fundamental-data-structures" title="Permalink to this headline">¶</a></h1>
<div class="section" id="methodcontext">
<h2>MethodContext<a class="headerlink" href="#methodcontext" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="rpclib.MethodContext">
<em class="property">class </em><tt class="descclassname">rpclib.</tt><tt class="descname">MethodContext</tt><big>(</big><em>app</em><big>)</big><a class="headerlink" href="#rpclib.MethodContext" title="Permalink to this definition">¶</a></dt>
<dd><p>The base class for all RPC Contexts. Holds crucial information about the
lifetime of a document.</p>
<dl class="attribute">
<dt id="rpclib.MethodContext.app">
<tt class="descname">app</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.app" title="Permalink to this definition">¶</a></dt>
<dd><p>The parent application.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.call_end">
<tt class="descname">call_end</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.call_end" title="Permalink to this definition">¶</a></dt>
<dd><p>The time the rpc operation was completed in seconds-since-epoch
format.</p>
<p>Useful for benchmarking purposes.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.call_start">
<tt class="descname">call_start</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.call_start" title="Permalink to this definition">¶</a></dt>
<dd><p>The time the rpc operation was initiated in seconds-since-epoch
format.</p>
<p>Useful for benchmarking purposes.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.descriptor">
<tt class="descname">descriptor</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.descriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>The MethodDescriptor object representing the current method.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.event">
<tt class="descname">event</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.event" title="Permalink to this definition">¶</a></dt>
<dd><p>Event-specific context. Use this as you want, preferably only in
events, as you&#8217;d probably want to separate the event data from the
method data.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.frozen">
<tt class="descname">frozen</tt><em class="property"> = False</em><a class="headerlink" href="#rpclib.MethodContext.frozen" title="Permalink to this definition">¶</a></dt>
<dd><p>When this is set, no new attribute can be added to this class
instance. This is mostly for internal use.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.in_body_doc">
<tt class="descname">in_body_doc</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.in_body_doc" title="Permalink to this definition">¶</a></dt>
<dd><p>Incoming body document of the request.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.in_document">
<tt class="descname">in_document</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.in_document" title="Permalink to this definition">¶</a></dt>
<dd><p>Incoming document, what you get when you parse the incoming stream.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.in_error">
<tt class="descname">in_error</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.in_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Native python error object. If this is set, either there was a
parsing error or the incoming document was representing an exception.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.in_header">
<tt class="descname">in_header</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.in_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Deserialzed incoming header &#8211; a native object.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.in_header_doc">
<tt class="descname">in_header_doc</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.in_header_doc" title="Permalink to this definition">¶</a></dt>
<dd><p>Incoming header document of the request.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.in_object">
<tt class="descname">in_object</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.in_object" title="Permalink to this definition">¶</a></dt>
<dd><p>In the request (i.e. server) case, this contains the function
arguments for the function in the service definition class.
In the response (i.e. client) case, this contains the object returned
by the remote procedure call.</p>
<dl class="docutils">
<dt>It&#8217;s always an iterable of objects:</dt>
<dd><ul class="first last simple">
<li>[None] when the function has no output (client)/input (server)
types.</li>
<li>A single-element list that wraps the return value when the
function has one return type defined,</li>
<li>Left untouched even when the function has more than one return
values.</li>
</ul>
</dd>
</dl>
<p>The objects never contain the instances but lists of values. The order
is in line with <tt class="docutils literal"><span class="pre">self.descriptor.in_class._type_info.keys()</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.in_string">
<tt class="descname">in_string</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.in_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Incoming bytestream (i.e. an iterable of strings)</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.method_name">
<tt class="descname">method_name</tt><a class="headerlink" href="#rpclib.MethodContext.method_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The public name of the method the <tt class="docutils literal"><span class="pre">method_request_string</span></tt> was
matched to.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.method_request_string">
<tt class="descname">method_request_string</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.method_request_string" title="Permalink to this definition">¶</a></dt>
<dd><p>This is used as a basis on deciding which native method to call.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.out_body_doc">
<tt class="descname">out_body_doc</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.out_body_doc" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialized body object.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.out_document">
<tt class="descname">out_document</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.out_document" title="Permalink to this definition">¶</a></dt>
<dd><p>out_body_doc and out_header_doc wrapped in the outgoing envelope</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.out_error">
<tt class="descname">out_error</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.out_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Native exception thrown by the function in the service definition
class.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.out_header">
<tt class="descname">out_header</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.out_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Native python object set by the function in the service definition
class.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.out_header_doc">
<tt class="descname">out_header_doc</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.out_header_doc" title="Permalink to this definition">¶</a></dt>
<dd><p>Serialized header object.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.out_object">
<tt class="descname">out_object</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.out_object" title="Permalink to this definition">¶</a></dt>
<dd><p>In the request (i.e. server) case, this is the native python object
returned by the function in the service definition class.
In the response (i.e. client) case, this contains the function arguments
passed to the function call wrapper.</p>
<dl class="docutils">
<dt>It&#8217;s always an iterable of objects:</dt>
<dd><ul class="first last simple">
<li>[None] when the function has no output (server)/input (client)
types.</li>
<li>A single-element list that wraps the return value when the
function has one return type defined,</li>
<li>Left untouched even when the function has more than one return
values.</li>
</ul>
</dd>
</dl>
<p>The objects never contain the instances but lists of values. The order
is in line with <tt class="docutils literal"><span class="pre">self.descriptor.out_class._type_info.keys()</span></tt>.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.out_string">
<tt class="descname">out_string</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.out_string" title="Permalink to this definition">¶</a></dt>
<dd><p>Outgoing bytestream (i.e. an iterable of strings)</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.service_class">
<tt class="descname">service_class</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.service_class" title="Permalink to this definition">¶</a></dt>
<dd><p>The service definition class the method belongs to.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.transport">
<tt class="descname">transport</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.transport" title="Permalink to this definition">¶</a></dt>
<dd><p>The transport-specific context. Transport implementors can use this
to their liking.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodContext.udc">
<tt class="descname">udc</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodContext.udc" title="Permalink to this definition">¶</a></dt>
<dd><p>The user defined context. Use it to your liking.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="methoddescriptor">
<h2>MethodDescriptor<a class="headerlink" href="#methoddescriptor" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="rpclib.MethodDescriptor">
<em class="property">class </em><tt class="descclassname">rpclib.</tt><tt class="descname">MethodDescriptor</tt><big>(</big><em>function</em>, <em>in_message</em>, <em>out_message</em>, <em>doc</em>, <em>is_callback=False</em>, <em>is_async=False</em>, <em>mtom=False</em>, <em>in_header=None</em>, <em>out_header=None</em>, <em>faults=None</em>, <em>port_type=None</em>, <em>no_ctx=False</em>, <em>udp=None</em>, <em>class_key=None</em><big>)</big><a class="headerlink" href="#rpclib.MethodDescriptor" title="Permalink to this definition">¶</a></dt>
<dd><p>This class represents the method signature of a soap method,
and is returned by the rpc decorator.</p>
<dl class="attribute">
<dt id="rpclib.MethodDescriptor.class_key">
<tt class="descname">class_key</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodDescriptor.class_key" title="Permalink to this definition">¶</a></dt>
<dd><p>The name the function is accessible from in the class.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodDescriptor.doc">
<tt class="descname">doc</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodDescriptor.doc" title="Permalink to this definition">¶</a></dt>
<dd><p>The function docstring.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodDescriptor.faults">
<tt class="descname">faults</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodDescriptor.faults" title="Permalink to this definition">¶</a></dt>
<dd><p>The exceptions that this function can throw.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodDescriptor.in_header">
<tt class="descname">in_header</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodDescriptor.in_header" title="Permalink to this definition">¶</a></dt>
<dd><p>The incoming header object this function could accept.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodDescriptor.in_message">
<tt class="descname">in_message</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodDescriptor.in_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically generated complex object based on incoming arguments to
the function.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodDescriptor.key">
<tt class="descname">key</tt><a class="headerlink" href="#rpclib.MethodDescriptor.key" title="Permalink to this definition">¶</a></dt>
<dd><p>The function identifier in &#8216;{namespace}name&#8217; form.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodDescriptor.mtom">
<tt class="descname">mtom</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodDescriptor.mtom" title="Permalink to this definition">¶</a></dt>
<dd><p>Flag to indicate whether to use MTOM transport with SOAP.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodDescriptor.name">
<tt class="descname">name</tt><a class="headerlink" href="#rpclib.MethodDescriptor.name" title="Permalink to this definition">¶</a></dt>
<dd><p>The public name of the function. Equals to the type_name of the
in_message.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodDescriptor.no_ctx">
<tt class="descname">no_ctx</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodDescriptor.no_ctx" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether the function receives the method context as the first
argument implicitly.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodDescriptor.out_header">
<tt class="descname">out_header</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodDescriptor.out_header" title="Permalink to this definition">¶</a></dt>
<dd><p>The outgoing header object this function could send.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodDescriptor.out_message">
<tt class="descname">out_message</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodDescriptor.out_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Automatically generated complex object based on the return type of
the function.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodDescriptor.port_type">
<tt class="descname">port_type</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodDescriptor.port_type" title="Permalink to this definition">¶</a></dt>
<dd><p>The portType this function belongs to.</p>
</dd></dl>

<dl class="attribute">
<dt id="rpclib.MethodDescriptor.udp">
<tt class="descname">udp</tt><em class="property"> = None</em><a class="headerlink" href="#rpclib.MethodDescriptor.udp" title="Permalink to this definition">¶</a></dt>
<dd><p>Short for &#8220;User-Defined Properties&#8221;, it&#8217;s your own playground. You
can use it to store custom metadata about the method.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="eventmanager">
<span id="reference-eventmanager"></span><h2>EventManager<a class="headerlink" href="#eventmanager" title="Permalink to this headline">¶</a></h2>
<p>Rpclib supports a simple event system that can be used to have repetitive boiler
plate code that has to run for every method call nicely tucked away in one or
more event handlers. The popular use-cases include things like database
transaction management, logging and measuring performance.</p>
<p>Various Rpclib components support firing events at various stages during the
processing of the request, which are documented in the relevant classes.</p>
<dl class="docutils">
<dt>The classes that support events are:</dt>
<dd><ul class="first last simple">
<li><a class="reference internal" href="application.html#rpclib.application.Application" title="rpclib.application.Application"><tt class="xref py py-class docutils literal"><span class="pre">rpclib.application.Application</span></tt></a></li>
<li><a class="reference internal" href="service.html#rpclib.service.ServiceBase" title="rpclib.service.ServiceBase"><tt class="xref py py-class docutils literal"><span class="pre">rpclib.service.ServiceBase</span></tt></a></li>
<li><a class="reference internal" href="protocol.html#rpclib.protocol._base.ProtocolBase" title="rpclib.protocol._base.ProtocolBase"><tt class="xref py py-class docutils literal"><span class="pre">rpclib.protocol._base.ProtocolBase</span></tt></a></li>
<li><a class="reference internal" href="server.html#rpclib.server.wsgi.WsgiApplication" title="rpclib.server.wsgi.WsgiApplication"><tt class="xref py py-class docutils literal"><span class="pre">rpclib.server.wsgi.WsgiApplication</span></tt></a></li>
</ul>
</dd>
</dl>
<dl class="class">
<dt id="rpclib.EventManager">
<em class="property">class </em><tt class="descclassname">rpclib.</tt><tt class="descname">EventManager</tt><big>(</big><em>parent</em>, <em>handlers={}</em><big>)</big><a class="headerlink" href="#rpclib.EventManager" title="Permalink to this definition">¶</a></dt>
<dd><p>The event manager for all rpclib events. The events are stored in an
ordered set &#8211; so the events are ran in the order they were added and
adding a handler twice does not cause it to run twice.</p>
<dl class="method">
<dt id="rpclib.EventManager.add_listener">
<tt class="descname">add_listener</tt><big>(</big><em>event_name</em>, <em>handler</em><big>)</big><a class="headerlink" href="#rpclib.EventManager.add_listener" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a handler for the given event name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>event_name</strong> &#8211; The event identifier, indicated by the documentation.
Usually, this is a string.</li>
<li><strong>handler</strong> &#8211; A static python function that receives a single
MethodContext argument.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="rpclib.EventManager.fire_event">
<tt class="descname">fire_event</tt><big>(</big><em>event_name</em>, <em>ctx</em><big>)</big><a class="headerlink" href="#rpclib.EventManager.fire_event" title="Permalink to this definition">¶</a></dt>
<dd><p>Run all the handlers for a given event name.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>event_name</strong> &#8211; The event identifier, indicated by the documentation.
Usually, this is a string.</li>
<li><strong>handler</strong> &#8211; The method context. Event-related data is conventionally
stored in ctx.event attribute.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Fundamental Data Structures</a><ul>
<li><a class="reference internal" href="#methodcontext">MethodContext</a></li>
<li><a class="reference internal" href="#methoddescriptor">MethodDescriptor</a></li>
<li><a class="reference internal" href="#eventmanager">EventManager</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="index.html"
                        title="previous chapter">Rpclib API Reference</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="model.html"
                        title="next chapter">Models</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../sources/reference/base.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="model.html" title="Models"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Rpclib API Reference"
             >previous</a> |</li>
        <li><a href="../index.html">rpclib 2.5.1-beta documentation</a> &raquo;</li>
          <li><a href="index.html" >Rpclib API Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2011, Rpclib Contributors.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>